<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Perceptual Map Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background: #f4f4f9; font-family: sans-serif; }
    .container { max-width: 680px; margin: 32px auto; background: #fff; border-radius: 18px; box-shadow: 0 4px 16px #0001; padding: 2em; }
    h2 { text-align: center; }
    label { display: block; margin: 8px 0 4px; font-weight: bold; }
    input[type="text"], input[type="number"], input[type="color"] {
      padding: 6px; border-radius: 6px; border: 1px solid #bbb; margin-bottom: 12px; width: 100%;
    }
    input[type="range"] { width: 100%; }
    button { padding: 8px 18px; background: #2563eb; color: #fff; border: none; border-radius: 7px; cursor: pointer; font-size: 1em; }
    button:hover { background: #1939a4; }
    .map-area { margin: 32px 0 0; display: flex; flex-direction: row; gap: 28px;}
    .controls { flex: 1; }
    .brand-box { background: #f9fafb; border: 1px solid #eee; padding: 12px; border-radius: 10px; margin-bottom: 18px;}
    .svg-container { position: relative; }
    .delete-btn {
      background: #f87171;
      color: #fff;
      padding: 5px 14px;
      border: none;
      border-radius: 5px;
      margin-top: 5px;
      margin-left: 2px;
      cursor: pointer;
      font-size: 0.95em;
      transition: background 0.2s;
    }
    .delete-btn:hover { background: #dc2626; }
    #download-btn { margin: 12px 0 0 0; display: block; }
    @media (max-width: 900px) { .map-area { flex-direction: column; gap: 10px; } }
  </style>
</head>
<body>
<div class="container">
  <h2>Perceptual Map Tool</h2>
  <div>
    <label for="x-axis">Horizontal Axis Label:</label>
    <input id="x-axis" type="text" value="Price">
    <label for="y-axis">Vertical Axis Label:</label>
    <input id="y-axis" type="text" value="Quality">
  </div>
  <form id="brand-form" autocomplete="off" style="margin-top:18px; display:flex; gap:12px; flex-wrap: wrap;">
    <input id="brand-name" type="text" placeholder="Name" style="flex:1; min-width: 110px;">
    <input id="brand-x" type="number" min="0" max="100" value="50" style="width:60px;">
    <input id="brand-y" type="number" min="0" max="100" value="50" style="width:60px;">
    <input id="brand-color" type="color" value="#2563eb" style="width:44px; padding:0;">
    <button type="submit">Add Point</button>
  </form>
  <button id="download-btn">Download Chart</button>
  <div class="map-area">
    <div class="svg-container">
      <canvas id="perceptual-map" width="420" height="420" style="display:block; background:#f1f5f9; border: 2px solid #000; border-radius: 10px;"></canvas>
    </div>
    <div class="controls" id="brand-controls">
      <p style="color:#7e7e7e;">Add a point to get started!</p>
    </div>
  </div>
</div>
<footer style="
  margin-top: 36px;
  text-align: center;
  color: #6c757d;
  font-size: 1.05em;
  letter-spacing: 1px;
  padding-bottom: 14px;
  ">
  Matthew Boyko - 2025
</footer>
<script>
const brands = [];
const CANVAS_SIZE = 320, margin = 60;
const canvas = document.getElementById('perceptual-map');
const ctx = canvas.getContext('2d');
const controls = document.getElementById('brand-controls');

function renderMap() {
  const xLabel = document.getElementById('x-axis').value;
  const yLabel = document.getElementById('y-axis').value;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Draw background
  ctx.fillStyle = '#f1f5f9';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Draw border
  ctx.strokeStyle = "#000";
  ctx.lineWidth = 2.5;
  ctx.strokeRect(margin, margin, CANVAS_SIZE, CANVAS_SIZE);

  // Draw X and Y axes (black, thick)
  ctx.strokeStyle = "#000";
  ctx.lineWidth = 2.8;
  // Y axis (vertical)
  ctx.beginPath();
  ctx.moveTo(margin, margin);
  ctx.lineTo(margin, margin + CANVAS_SIZE);
  ctx.stroke();
  // X axis (horizontal)
  ctx.beginPath();
  ctx.moveTo(margin, margin + CANVAS_SIZE);
  ctx.lineTo(margin + CANVAS_SIZE, margin + CANVAS_SIZE);
  ctx.stroke();

  // Quadrant lines (dashed, gray, centered)
  ctx.save();
  ctx.setLineDash([7,5]);
  ctx.strokeStyle = "#888";
  ctx.lineWidth = 1.5;
  // Vertical (center)
  ctx.beginPath();
  ctx.moveTo(margin + CANVAS_SIZE/2, margin);
  ctx.lineTo(margin + CANVAS_SIZE/2, margin + CANVAS_SIZE);
  ctx.stroke();
  // Horizontal (center)
  ctx.beginPath();
  ctx.moveTo(margin, margin + CANVAS_SIZE/2);
  ctx.lineTo(margin + CANVAS_SIZE, margin + CANVAS_SIZE/2);
  ctx.stroke();
  ctx.setLineDash([]);
  ctx.restore();

  // Low/High indicators INSIDE chart corners
  ctx.font = "14px sans-serif";
  ctx.fillStyle = "#000";
  // X-axis Low/High
  ctx.textAlign = "left";
  ctx.fillText("Low", margin + 4, margin + CANVAS_SIZE + 28);
  ctx.textAlign = "right";
  ctx.fillText("High", margin + CANVAS_SIZE - 4, margin + CANVAS_SIZE + 28);
  // Y-axis Low/High
  ctx.textAlign = "center";
  ctx.fillText("Low", margin - 30, margin + CANVAS_SIZE - 8);
  ctx.fillText("High", margin - 28, margin + 18);

  // Axis Labels closer to the chart, right beside axes
  ctx.font = "bold 20px sans-serif";
  ctx.textAlign = "center";
  // X-axis label
  ctx.fillText(xLabel, margin + CANVAS_SIZE/2, margin + CANVAS_SIZE + 30);
  // Y-axis label (rotated)
  ctx.save();
  ctx.translate(margin - 25, margin + CANVAS_SIZE/2);
  ctx.rotate(-Math.PI/2);
  ctx.textAlign = "center";
  ctx.font = "bold 20px sans-serif";
  ctx.fillText(yLabel, 0, 0);
  ctx.restore();

  // Draw brands
  brands.forEach(brand => {
    // X: 0=left, 100=right. Y: 0=bottom, 100=top
    const cx = margin + (brand.x/100) * CANVAS_SIZE;
    const cy = margin + CANVAS_SIZE - (brand.y/100) * CANVAS_SIZE;
    // Dot
    ctx.beginPath();
    ctx.arc(cx, cy, 13, 0, 2*Math.PI);
    ctx.fillStyle = brand.color || "#2563eb";
    ctx.globalAlpha = 0.85;
    ctx.fill();
    ctx.globalAlpha = 1;
    ctx.lineWidth = 2;
    ctx.strokeStyle = "#fff";
    ctx.stroke();
    // Brand Name
    ctx.font = "bold 13px sans-serif";
    ctx.fillStyle = "#222";
    ctx.textAlign = "center";
    ctx.fillText(brand.name, cx, cy-18);
  });
}

function renderControls() {
  if (brands.length === 0) {
    controls.innerHTML = '<p style="color:#7e7e7e;">Add a point to get started!</p>';
    return;
  }
  controls.innerHTML = '';
  brands.forEach((brand, i) => {
    const brandBox = document.createElement('div');
    brandBox.className = 'brand-box';
    brandBox.innerHTML = `
      <div style="font-weight:600; font-size:1em; margin-bottom:2px;">
        <span style="display:inline-block;width:14px;height:14px;vertical-align:middle;background:${brand.color};border-radius:3px;margin-right:7px;border:1.5px solid #bbb;"></span>
        ${brand.name}
      </div>
      <label style="font-size:0.95em;">${document.getElementById('x-axis').value}: <span id="label-x-${i}">${brand.x}</span></label>
      <input type="range" min="0" max="100" value="${brand.x}" data-i="${i}" data-field="x">
      <label style="font-size:0.95em;">${document.getElementById('y-axis').value}: <span id="label-y-${i}">${brand.y}</span></label>
      <input type="range" min="0" max="100" value="${brand.y}" data-i="${i}" data-field="y">
      <button class="delete-btn" data-i="${i}">Delete</button>
    `;
    // Slider events
    brandBox.querySelectorAll('input[type="range"]').forEach(slider => {
      slider.oninput = (e) => {
        const idx = +e.target.dataset.i;
        const field = e.target.dataset.field;
        brands[idx][field] = +e.target.value;
        document.getElementById(`label-${field}-${i}`).textContent = e.target.value;
        renderMap();
      };
    });
    // Delete event
    brandBox.querySelector('.delete-btn').onclick = (e) => {
      const idx = +e.target.dataset.i;
      brands.splice(idx, 1);
      renderMap(); renderControls();
    };
    controls.appendChild(brandBox);
  });
}

document.getElementById('brand-form').onsubmit = (e) => {
  e.preventDefault();
  const name = document.getElementById('brand-name').value.trim();
  const x = Math.max(0, Math.min(100, +document.getElementById('brand-x').value));
  const y = Math.max(0, Math.min(100, +document.getElementById('brand-y').value));
  const color = document.getElementById('brand-color').value || "#2563eb";
  if (!name) return;
  brands.push({ name, x, y, color });
  document.getElementById('brand-name').value = '';
  document.getElementById('brand-x').value = 50;
  document.getElementById('brand-y').value = 50;
  document.getElementById('brand-color').value = "#2563eb";
  renderMap(); renderControls();
};
document.getElementById('x-axis').oninput = () => { renderMap(); renderControls(); };
document.getElementById('y-axis').oninput = () => { renderMap(); renderControls(); };

// Download button logic
document.getElementById('download-btn').onclick = () => {
  const link = document.createElement('a');
  link.download = "perceptual-map.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
};

// Initial render
renderMap();
renderControls();
</script>
</body>
</html>
